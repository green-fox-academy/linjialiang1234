<!DOCTYPE html>
<html lang="en">

<head>
  <title></title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="./addPost.css" rel="stylesheet">

  <style>
    #container {
      width: 500px;
    }

    #nav {
      background-color: lightgray;
    }

    #heading {
      border-bottom: 5px solid lightblue;
      font-size: 25px;
      margin-bottom: 10px;
    }

    #discription {
      background-color: darkgoldenrod;
      border: 1px solid red;
    }

    #urlDiv,
    #titleDiv {
      background-color: lightblue;
      margin: 10px 0px;
      padding: 10px 5px;
    }

    #optionsDiv {
      background-color: lightblue;
      margin: 10px 0px;
    }

    #optionsDiv p,
    #optionsDiv input,
    #optionsDiv span {
      padding: 5px 5px;
    }

    #urlDiv label,
    #urlInput,
    #titleDiv label,
    #titleInputs {
      display: block;
    }
  </style>
</head>

<body>
  <div id="nav">
    <p>MAIN - CREATE NEW POST</p>
  </div>

  <div id="container">
    <div id="heading">
      <p>submit to the page</p>
    </div>

    <div id="discription">
      <p>The meaning of this block is to show off your CSS skills.</p>
    </div>

    <div id="urlDiv">
      <label for="urlInput">url</label>
      <input type="text" id="urlInput" name="urlInput" value="">
    </div>

    <div id="titleDiv">
      <label for="titleInput">*title</label>
      <input type="text" id="titleInput" name="titleInput" value="">
    </div>

    <div id="optionsDiv">
      <p>options</p>
      <input type="checkbox" checked="checked" disabled>
      <span>post as anonymous</span>
    </div>
    <p>*requried</p>
    <button type="button" id="submitButton">submit</button>
  </div>

  <script>
    var submitButton = document.getElementById("submitButton");
    submitButton.addEventListener("click", function () {
      checkInputEmpty();
    });

    function checkInputEmpty() {
      var urlValue = document.getElementById("urlInput");
      var titleValue = document.getElementById("titleInput");
      if (urlValue.value === "") {
        alert("Please input the URL!");
      }
      if (titleValue.value === "") {
        alert("Please input the title!");
      }
      console.log("urlValue: " + urlValue.value + "titleValue: " + titleValue.value);

      postData();

    }

    function postData() {
      var xhr = new XMLHttpRequest();
      var postData = {
        "title": "Duis aliquam convallis nunc. Proin at turpis a pede posuere nonummy. Integer non velit.",
        "href": "https://mapquest.com"
      };
      
      var jSONPostData = JSON.stringify(postData);
      console.log("Original post data:   " + jSONPostData);

      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4 && xhr.status == 200) {
          var result = JSON.parse(xhr.responseText);
          console.log("success receviced data: " + result);
        }
      }
      xhr.open("POST", "https://time-radish.glitch.me/posts", true);
      xhr.setRequestHeader("Accept", "application/json");
      xhr.setRequestHeader("Content-type", "application/json");
      xhr.send(jSONPostData);
     

    }
  </script>
</body>

</html>